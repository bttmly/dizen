// Generated by CoffeeScript 1.8.0
var NO_COPY, decorate, decorated, dizen, flipDecorate, noop, registry, use,
  __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };

NO_COPY = ["decorator_name", "init", "cleanup"];

noop = function() {};

dizen = function(obj) {};

registry = {};

decorated = new Set();

use = function(dec) {
  if (typeof dec.decorator_name !== "string") {
    throw new Error();
  }
  if (registry[dec.decorator_name]) {
    throw new Error();
  }
};

decorate = function(name, obj, options) {
  var cleanup, dec, prop;
  if (!registry[name]) {
    throw new Error();
  }
  dec = registry[name];
  for (prop in decorator) {
    if (__indexOf.call(NO_COPY, prop) < 0) {
      obj[prop] = decorator[prop];
    }
  }
  if (init in decorator) {
    init.call(obj, options);
  }
  if (!obj.cleanup) {
    obj.cleanup = noop;
  }
  if (obj.cleanup && dec.cleanup && typeof dec.cleanup === "function") {
    cleanup = obj.cleanup;
    obj.cleanup = function() {
      cleanup();
      return dec.cleanup.call(obj);
    };
  }
  return obj;
};

flipDecorate = function(dec, options, obj) {
  return decorate(dec, obj, options);
};
